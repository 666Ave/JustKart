<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="An express local shopping website">
        <meta name="author" content="Avian Silveira && Umesh Basniwal">
        <title>Account | JustKart</title>
		<link rel="shortcut icon" href="/images/logo.ico" />
        <link href="styles/bootstrap.min.css" rel="stylesheet">
        <link href="styles/font-awesome.min.css" rel="stylesheet">
        <link href="styles/animate.css" rel="stylesheet">
        <link href="styles/main.css" rel="stylesheet">
        <link href="styles/responsive.css" rel="stylesheet">
    </head><!--/head-->
    <body ng-app="Myapp">
        <div id="header" ng-include src="'templates/header.html'"><!--header-->
        </div><!--/header-->
	
	<section ng-controller="accountCtrl">            
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="left-sidebar">
                        <h2>My Account</h2>
                        <!-- tabs-->
                        <div class="tabbable list-stack">
                            <ul class="nav nav-pills nav-stacked col-md-2">
                                <li class="active"><a href="#profile" data-toggle="tab">Profile</a></li>
                                <li><a href="#orders" data-toggle="tab">My Orders</a></li>
                                <li><a href="#reviews" data-toggle="tab">My Reviews & Ratings</a></li>
                                <h3 class="list-heading">Account Settings</h3>
                                <li><a href="#changePassword" data-toggle="tab">Change Password</a></li>
                                <li><a href="#addresses" data-toggle="tab">Addresses</a></li>
                                <li><a href="#updateEmailMobile" data-toggle="tab">Update Email/Mobile</a></li>
                                <li><a href="#deactivate" data-toggle="tab">Deactivate Account</a></li>
                            </ul>
                            <div class="tab-content col-md-10">
                                <div class="tab-pane active" id="profile"> 
                                    <div class="form-two">
                                        <form name="updatePro" ng-submit="processProfile(updateProfile.$valid)" novalidate>
                                            <div class="form-group" ng-class="{ 'has-error' : updatePro.fName.$invalid && !updatePro.fName.$pristine}">
										    <input type="text" class="form-control" name="fName" ng-pattern="/^[a-zA-Z]+$/" placeholder="First Name" ng-model="updateProfile.fName">
                                            <span ng-show="updatePro.fName.$invalid && !updatePro.fName.$pristine" class="help-block">No numbers or special characters please.</span>
									        </div>
                                            <div class="form-group" ng-class="{ 'has-error' : updatePro.lName.$invalid && !updatePro.lName.$pristine }">
										    <input type="text" class="form-control" name="lName" ng-pattern="/^[a-zA-Z]+$/" placeholder="Last Name" ng-model="updateProfile.lName">
                                            <span ng-show="updatePro.lName.$invalid && !updatePro.lName.$pristine" class="help-block">No numbers or special characters please.</span>
									        </div>
                                            <label>Gender</label>
                                            <select name="gender" ng-model="updateProfile.gender">
                                                <option value="Male">Male</option>
                                                <option value="Female">Female</option>
                                                <option value="Transgender">Transgender</option>
                                            </select> 
                                            <button class="btn btn-default check_out" ng-disabled="updatePro.$invalid">Save Changes</button>
                                        </form>
                                    </div>
                                </div>
                                <div class="tab-pane" id="orders" ng-controller="orderCtrl">
                                    <div class="prev_orders">
                                        <section id="cart_items">
                                            <div class="container">
                                                <div class="table-responsive cart_info">
                                                    <table class="table table-condensed">
                                                        <thead>
                                                            <tr class="cart_menu">
                                                                <td class="image">Item</td>
                                                                <td class="description">Description</td>
                                                                <td class="details">Details</td>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="pro in order_items track by $index">
                                                                <td class="cart_product" >
                                                                    <a href="product-details.html#/?pid={{pro.product_id}}"><img src="images/products/{{ pro.product_image }}" alt="{{ pro.product_title }}"></a>
                                                                </td>
                                                                <td class="cart_description">
                                                                    <h4><a href="product-details.html#/?pid={{pro.product_id}}">{{ pro.product_title }}</a></h4>
                                                                    <p>Web ID: {{ pro.product_id }}</p>
                                                                </td>
                                                                <td class="cart_details">
                                                                    <a href="product-details.html#/?pid={{pro.product_id}}" class="btn btn-default check_out">Details</a>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </section> <!--/#cart_items-->
                                    </div>
                                </div>
                                <div class="tab-pane" id="reviews">
                                    <div id="reviews" >
                                        <div class="col-sm-12">
                                            <div ng-repeat="r in reviews">
                                                <ul>
                                                    <li><i class="fa fa-user"></i>{{ r.user_name }}</li>
                                                    <li><i class="fa fa-clock-o"></i>{{ r.review_date*1000 | date:'hh:mm a'}}</li>
                                                    <li><i class="fa fa-calendar-o"></i>{{ r.review_date*1000 | date:'dd EEE yyyy' : UTC}}</li>
                                                    <li><i class="fa fa-star"></i>{{ r.rating }}</li>
                                                    <li><i class="fa fa-database"></i><a href="product-details.html#/?pid={{r.product_id}}">{{ r.product_title }}</a></li>
                                                </ul>
                                                <h4>{{ r.review_title }}</h4>
                                                <p>{{ r.review_content }}</p>
                                                <hr/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="changePassword">
                                     <div class="form-two">
                                            <form name="updatePass" ng-submit="processPassword(updatePass.$valid)" novalidate>
                                                <div class="form-group" ng-class="{ 'has-error' : updatePass.oldpassword.$invalid && !updatePass.oldpassword.$pristine}">
                                                    <input type="password" class="form-control" name="oldpassword" ng-pattern="/^[a-zA-Z]+[0-9]+$/" placeholder="Enter old Password" ng-model="updatePassword.oldpassword" required>
                                                    <span ng-show="updatePass.oldpassword.$invalid && !updatePass.oldpassword.$pristine" class="help-block">Alphanumeric values only!</span>
                                                </div>
                                                <div class="form-group" ng-class="{ 'has-error' : updatePass.password.$invalid && !updatePass.password.$pristine}">
                                                    <input type="password" class="form-control" name="password" ng-pattern="/^[a-zA-Z]+[0-9]+$/" placeholder="Enter new Password" ng-model="updatePassword.password" required>
                                                    <span ng-show="updatePass.password.$invalid && !updatePass.password.$pristine" class="help-block">Alphanumeric values only!</span>
                                                </div>
                                                <div class="form-group" ng-class="{ 'has-error' : updatePass.conpassword.$invalid && !updatePass.conpassword.$pristine}">
                                                    <input type="password" class="form-control" name="conpassword" placeholder="Re-enter new Password" ng-model="updatePassword.conpassword" compare-to="updatePassword.password" required>
                                                    <span ng-show="updatePass.conpassword.$invalid && !updatePass.conpassword.$pristine" class="help-block">Both the passwords should match.</span>
                                                </div>
                                                <button class="btn btn-default check_out" ng-disabled="updatePass.$invalid">Change Password</button>
                                            </form>
                                        </div>   
                                </div>
                                <div class="tab-pane" id="addresses">
                                    <div class="form-one">
                                        <form name="updateAss" ng-submit="processAddress(updateAss.$valid)" novalidate>
                                            <div class="form-group" ng-class="{ 'has-error' : updateAss.Address.$invalid && !updateAss.Address.$pristine}">
                                                <textarea name="Address" class="form-control" ng-model="updateAddress.address" placeholder="Address" rows="4" required>{{updateAddress.address}}</textarea>
                                            </div>
                                            <div class="form-group" ng-class="{ 'has-error' : updateAss.pin.$invalid && !updateAss.pin.$pristine}">
                                                <input type="text" name="pin" class="form-control" ng-pattern="/^[0-9]+$/" ng-maxlength="6" ng-model="updateAddress.pin" placeholder="Zip / Postal Code" required>
                                                <span ng-show="updateAss.pin.$invalid && !updateAss.pin.$pristine" class="help-block">Pin codes are numberic only of 6 digits</span>
                                            </div>
                                            <button class="btn btn-default check_out" ng-disabled="updateAss.$invalid">Change Address</button>
                                        </form>
                                    </div>    
                                </div>
                                <div class="tab-pane" id="updateEmailMobile">
                                    <div class="form-one">
                                        <form name="updateMob" ng-submit="processMob(updateMob.$valid)" novalidate>
                                            <div class="form-group" ng-class="{ 'has-error' : updateMob.mobile.$invalid && !updateMob.mobile.$pristine}">
                                                <input type="text" name="mobile" class="form-control" ng-pattern="/^[0-9]+$/" ng-maxlength="10" ng-model="updateMobile.mobile" placeholder="Mobile number" required>
                                                <span ng-show="updateMob.mobile.$invalid && !updateMob.mobile.$pristine" class="help-block">Mobile number is 10 digits long!</span>
                                            </div>
                                            <div class="form-group" ng-class="{ 'has-error' : updateMob.email.$invalid && !updateMob.email.$pristine}">
                                                <input type="email" name="email" class="form-control" ng-model="updateMobile.email" placeholder="Email" required>
                                                <span ng-show="updateMob.email.$invalid && !updateMob.email.$pristine" class="help-block">Email is required</span>
                                            </div>
                                            <button class="btn btn-default check_out" ng-disabled="updateMob.$invalid">Change Address</button>
                                        </form>
                                    </div>                                     
                                </div>
                                <div class="tab-pane" id="deactivate">
                                    <div class="form-one">
                                        <form name="deact" ng-submit="processDeact(deact.$valid)" novalidate>
                                            <label>UserName : {{deactivate.uname}}</label>
                                            <div class="form-group" ng-class="{ 'has-error' : deact.password.$invalid && !deact.password.$pristine}">
                                                    <input type="password" class="form-control" name="password" ng-pattern="/^[a-zA-Z]+[0-9]+$/" placeholder="Enter Password" ng-model="deactivate.password" required>
                                                    <span ng-show="deact.password.$invalid && !deact.password.$pristine" class="help-block">Alphanumeric values only!</span>
                                                </div>
                                            <button class="btn btn-default check_out" ng-disabled="deact.$invalid">Deactivate!</button>
                                        </form>
                                    </div> 
                                </div>
                            </div>
                        </div>
                        <!-- /tabs -->
                    </div>
                </div>
            </div>
        </div>		
	</section>
	
        <div id="footer" ng-include src="'templates/footer.html'"><!--Footer-->		
        </div><!--/Footer-->
		<script src="scripts/js/jquery.js"></script>			
        <script src="scripts/js/angular.min.js"></script>
		<script src="scripts/js/angular-cookies.min.js"></script>
		<script src="scripts/js/angularjs-geolocation.min.js"></script>
		<script src="scripts/js/ui-bootstrap-tpls-1.1.2.min.js"></script>
		<script src="scripts/js/angular-animate.min.js"></script>
        <script src="scripts/app.js"></script>
		<script src="scripts/services/proinfo.js"></script>
		<script src="scripts/services/authFact.js"></script>
        <script src="scripts/directives/compareTo.js"></script>
        <script src="scripts/controllers/MainController.js"></script>
		<script src="scripts/controllers/proCtrl.js"></script>
		<script src="scripts/controllers/cartCtrl.js"></script>
		<script src="scripts/controllers/loginCtrl.js"></script>
		<script src="scripts/controllers/locCtrl.js"></script>
        <script src="scripts/controllers/contactCtrl.js"></script>
        <script src="scripts/controllers/accountCtrl.js"></script>
        <script src="scripts/controllers/orderCtrl.js"></script>
        <script src="scripts/js/bootstrap.min.js"></script>
    </body>
</html>